#!/bin/bash
#insomnia-lite
#An application that will remind you when to go to bed based on your
#wake up time and the optimal sleep times algorithm.
#Version 1.0.0

function showRestNotification()
{
  if [[ "$OSTYPE" == "linux-gnu" ]]; then
      notify-send "Insomnia" "Time to take a rest"  -u critical -t 5000 -i sleep.ico

  elif [[ "$OSTYPE" == "darwin"* ]]; then
          terminal-notifier -title "Insomnia" -message "It's time to take a rest"  -sound "default"  -group rest -timeout 7 -appIcon sleep.png 
  fi
}



function generateSleepTimes()
{
  splitTime= echo $wakeUpTime | grep -o .
  for index in "${!splitTime[@]}"
do
    echo "$index ${splitTime[index]}"
done
}

declare -a sleepTimes
wakeUpTime="0830"


while getopts ":ts::" opt; do
  case $opt in
    s)
      echo "-s was triggered, Parameter: $OPTARG" >&2
      wakeUpTime=$OPTARG
      generateSleepTimes
      ;;
    \?)
      echo "Invalid option: -$OPTARG" >&2
      exit 1
      ;;
    t)
      showRestNotification
    ;;
    :)
      echo "Option -$OPTARG requires an argument." >&2
      exit 1
      ;;
  esac
done
